<div class="container">

	<h1 class="page-header">I-95 Travel Recommendations</h1>

	<div class="alert alert-warning" ng-show="vm.directions && vm.drivingDirections">
		<h2>Travel Recommendation</h2>
		<p><b>Transit Time:</b> {{vm.directions.duration.text}}</p>
		<p><b>Driving Time:</b> {{vm.drivingDirections.duration.text}}</p>

		<h4>{{ vm.getRecommendation() }}</h4>
	</div>

	<!-- Only displayed on mobile devices -->
	<div class="btn-group mb20" ng-show="vm.mobile">
		<button ng-class="{active: vm.panelToShow==1}" class="btn btn-primary" ng-click="vm.panelToShow=1">Alerts</button>
		<button ng-class="{active: vm.panelToShow==2}" class="btn btn-primary" ng-click="vm.panelToShow=2">Events</button>
		<button ng-class="{active: vm.panelToShow==3}" class="btn btn-primary" ng-click="vm.panelToShow=3">Transit</button>
		<button ng-class="{active: vm.panelToShow==4}" class="btn btn-primary" ng-click="vm.panelToShow=4">Cameras</button>
	</div>

	<div class="row">
		<!-- Alerts -->
		<div class="col-lg-3 col-md-3" ng-show="vm.panelToShow==1 || !vm.mobile">
			<div class="panel panel-primary">
				<div class="panel-heading">Recent Alerts</div>
				<div class="panel-body">
					<div ng-repeat="alert in vm.alerts" ng-cloak ng-show="vm.alerts.length > 0">
						<p>{{alert.Message}}</p>
						<hr>
					</div>
					<div class="alert alert-warning" ng-show="vm.alerts.length == 0">
						<h4>No alerts at this time</h4>
					</div>
				</div>
			</div>
		</div>

		<!-- Recent Events -->
		<div class="col-lg-3 col-md-3" ng-show="vm.panelToShow==2 || !vm.mobile">
			<div class="panel panel-primary">
				<div class="panel-heading">Recent Events</div>
				<div class="panel-body">
					<div ng-repeat="event in vm.events" ng-show="event.RoadwayName" ng-cloak>
						<h2>{{event.RoadwayName}}</h2>
						<p>{{event.Location}}</p>
						<p>Duration: {{event.Description}}</p>
						<p>Last Updated: {{event.LastUpdated}}</p>
						<hr>
					</div>
					<div class="alert alert-warning" ng-show="vm.events.length == 0" ng-cloak>
						<h4>No events at this time</h4>
					</div>
				</div>
			</div>
		</div>

		<!-- Transit Options -->
		<div class="col-lg-3 col-md-3" ng-show="vm.panelToShow==3 || !vm.mobile">
			<div class="panel panel-primary">
				<div class="panel-heading">Transit Options</div>
				<div class="panel-body">

					<div ng-show="vm.loading" class="alert alert-warning">
						<b>Loading...</b>
					</div>

					<div ng-show="vm.currentLocation">
						<p>Current Location:</p>
						<input type="text" class="form-control" ng-model="vm.currentLocation" readonly>
					</div>

					<div ng-show="vm.currentLocation">
						<p>Enter destination:</p>
						<input type="text" class="form-control" ng-model="vm.destination">
					</div>

					<button ng-disabled="vm.loading" class="btn btn-success" ng-show="!vm.currentLocation" ng-click="vm.getLocation()">Get Location</button>
					<button ng-disabled="vm.loading" class="btn btn-success" ng-click="vm.getDirections()" ng-show="vm.destination && vm.currentLocation">Get Directions</button>

					<div ng-show="vm.directions">
						<hr>
						<table class="table">
							<thead>
								<th>Step</th>
								<th>Duration (min)</th>
							</thead>
							<tbody>
								<tr ng-repeat="step in vm.directions.steps">
									<td>

										<b>{{::step.travel_mode}}</b>
										<p ng-show="step.transit_details">Departs at: {{step.transit_details.departure_time.text}}</p>
										<p>{{step.html_instructions}}</p>
									</td>
									<td>{{step.duration.text}}</td>
								</tr>
							</tbody>
						</table>

						<p><b>Distance:</b> {{vm.directions.distance.text}}</p>
						<p><b>Arrival Time:</b> {{vm.directions.arrival_time.text}}</p>
						<p><b>Total time:</b> {{vm.directions.duration.text}}</p>
					</div>
				</div>
			</div>
		</div>

		<!-- Travel Cameras -->
		<div class="col-lg-3 col-md-3" ng-show="vm.panelToShow==4 || !vm.mobile">
			<div class="panel panel-primary">
				<div class="panel-heading">Road Cameras</div>
				<div class="panel-body">

					<div ng-show="vm.cameras.length > 0">
						Select a city:
						<select ng-model="vm.selectedCameraCity" class="form-control">
							<option value=""></option>
							<option ng-repeat="(cityName, value) in vm.cameraCities" ng-value="cityName">{{::cityName}}</option>
						</select>
						<hr>

						<div ng-show="vm.selectedCameraCity" dir-paginate="camera in vm.cameras | filter: vm.selectedCameraCity | itemsPerPage: 3" ng-cloak>
							<a target="_blank" href="{{::camera.tooltipUrl}}">{{::camera.displayName}}</a>
							<hr>
						</div>
					</div>

					<div ng-show="vm.selectedCameraCity">
						<dir-pagination-controls auto-hide="true"></dir-pagination-controls>
					</div>

				</div>
			</div>
		</div>
	</div>
</div>